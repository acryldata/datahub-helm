---
categories:
  - datahub
  - datacatalog
questions:
  - variable: elasticsearch.enabled
    default: true
    type: boolean
    label: Enable ES
    group: "elasticsearch"
    description: "set this to false, if you want to provide your own ES instance."
    show_subquestion_if: true
    subquestions:
      - variable: elasticsearch.image
        label: Docker Image for ES
        description: "Docker image for ES"
        type: string
        required: true
        default: "docker.elastic.co/elasticsearch/elasticsearch"
        group: "elasticsearch"
      - variable: elasticsearch.esConfig
        label: esConfig for ES
        description: "If you deploy on air-gap environment, disable geoip."
        type: enum
        default: ""
        options:
          - "elasticsearch.yml: ingest.geoip.downloader.enabled: false"
        group: "elasticsearch"
      - variable: elasticsearch.replicas
        label: Set Replicas
        description: "set the number of replicas for ES."
        type: int
        required: true
        default: 3
        min: 1
        group: "elasticsearch"
      - variable: elasticsearch.minimumMasterNodes
        label: Set Minimum Master Nodes
        description: "set the number of minimum master nodes for ES."
        type: int
        required: true
        default: 1
        min: 1
        group: "elasticsearch"
      - variable: elasticsearch.antiAffinity
        label: Set antiAffinity
        description: "Setting this to 'hard' enforces the anti-affinity rules. If it is set to 'soft' it will be done 'best effort'. Other values will be ignored. Set replicas to 1 and antiAffinity to soft to allow the instance to be scheduled on a master node when deploying on a single node Minikube / Kind / etc cluster."
        type: enum
        default: "hard"
        options:
          - "hard"
          - "soft"
        group: "elasticsearch"
      - variable: elasticsearch.clusterHealthCheckParams
        label: Set clusterHealthCheckParams
        description: "The Elasticsearch cluster health status params that will be used by readiness probe command. If your running a single replica cluster, wait_for_status should be yellow."
        type: enum
        default: "wait_for_status=green&timeout=1s"
        options:
          - "wait_for_status=green&timeout=1s"
          - "wait_for_status=yellow&timeout=1s"
        group: "elasticsearch"
      - variable: elasticsearch.readinessProbe.initialDelaySeconds
        label: Set readinessProbe.initialDelaySeconds
        description: "If your running a single replica cluster add the following this value."
        type: int
        default: 10
        group: "elasticsearch"
      - variable: elasticsearch.esJavaOpts
        default: ""
        type: enum
        options:
          - ""
          - "-Xmx128m -Xms128m"
        label: Set esJavaOpts
        group: "elasticsearch"
        description: "Java options for Elasticsearch. This is where you could configure the jvm heap size. You can shrink default JVM heap."
      - variable: elasticsearch.resources.requests.cpu
        default: "1000m"
        type: enum
        options:
          - "1000m"
          - "100m"
        label: cpu Resource Request
        group: "elasticsearch"
        description: "Allows you to set the resources for the StatefulSet. Allocate smaller chunks of memory per pod."
      - variable: elasticsearch.resources.requests.memory
        default: "2Gi"
        type: enum
        options:
          - "2Gi"
          - "512M"
        label: memory Resource Request
        group: "elasticsearch"
        description: "Allows you to set the resources for the StatefulSet. Allocate smaller chunks of memory per pod."
      - variable: elasticsearch.resources.limits.cpu
        default: "1000m"
        type: enum
        options:
          - "1000m"
        label: cpu Resource Limit
        group: "elasticsearch"
        description: "Allows you to set the resources for the StatefulSet. Allocate smaller chunks of memory per pod."
      - variable: elasticsearch.resources.limits.memory
        default: "2Gi"
        type: enum
        options:
          - "2Gi"
          - "512M"
        label: memory Resource Limit
        group: "elasticsearch"
        description: "Allows you to set the resources for the StatefulSet. Allocate smaller chunks of memory per pod."
      - variable: elasticsearch.volumeClaimTemplate.storageClassName
        default: ""
        type: enum
        options:
          - ""
          - "standard"
        label: storageClassName of volumeClaimTemplate
        group: "elasticsearch"
        description: "Configuration for the volumeClaimTemplate for StatefulSets. You will want to adjust the storageClassName if you are using a different storage class. Request smaller persistent volumes."
      - variable: elasticsearch.volumeClaimTemplate.resources.requests.storage
        default: "30Gi"
        type: enum
        options:
          - "30Gi"
          - "100M"
        label: storage Resource Request of volumeClaimTemplate
        group: "elasticsearch"
        description: "Configuration for the volumeClaimTemplate for StatefulSets. You will want to adjust the storage (default 30Gi ). Request smaller persistent volumes."
